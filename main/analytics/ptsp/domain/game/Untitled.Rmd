---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.3.3
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python}
import sys
sys.path.append('..')
from agent_2005 import *
from map import *
from ptsp_config import *
from solution import *
from main.analytics.ptsp.domain.basic_solvers_2005.basic_order_solvers import *
from main.analytics.ptsp.domain.basic_solvers_2005.basic_steering_solvers import *
from main.analytics.ptsp.genetic.genetic_order import *
from main.analytics.ptsp.mcts.mct_order import *
```

```{python}
sys.path
```

```{python}
m = Map(30,320,240,5)

config = PTSPConfiguration()

a = Agent(m, config)

o = hill_climbing_ptsp(m, 1, config, 'local')
```

```{python}
solution = local_solution(m, config,o)

len(solution.moves)
```

```{python}
a.location
```

```{python}
m.cities[0]
```

```{python}
# s = Solution([], m, config)
# solution = []
# mct = MCT(a, s)
# mct.build_tree(max_time=360)
```

```{python}
# mct.iteration
```

```{python}
# s = Solution([], m, config)
# solution = []
# while not s.check_solution():
#     mct = MCT(a, s)
#     mct.build_tree(max_time=0.2)
#     move = mct.choose_next().moves[0]
#     print()
#     print(move)
#     a.update(move)
#     print(a.location)
#     solution.append(move)
```

```{python}
# for i in range(5):
#     print(list(mct.root.children)[i].fitness)
#     print(list(mct.root.children)[i].mean)
#     print(list(mct.root.children)[i].visits)
#     print(list(mct.root.children)[i].partial.moves)
#     print()
```

```{python}
# loc = (160,120)
# v = np.array([0.0, 0.0])
# dest = [200,200]

# n = number_of_moves(loc, v, dest, 5, math.sqrt(0.1), upper=10000, lower=0)

# n

# moves = local_next_city(loc, v, dest, 5, math.sqrt(0.1), n)

# a = Agent(m, config)
# a.v=v
# for move in moves:
#     a.update(move)
#     print(a.location,a.v)
```

mcts

```{python}
mct = MCTOrder([], m, config)
```

```{python}
mct.build_tree(60)
```

```{python}
o = mct.best_sol
```

```{python}
solution = local_solution(m, config,o)
```

```{python}
len(solution.moves)
```

```{python}

```

greedy

```{python}
o = hill_climbing_ptsp(m, 10, config, 'greedy')
```

```{python}
solution = greedy_solution(m, config, o)
```

```{python}
len(solution.moves)
```

```{python}

```

```{python}
gs = GeneticOrderSolver(32,m,config)
```

```{python}
o = gs.solve('greedy',120)
```

```{python}
solution = greedy_solution(m, config, o)
```

```{python}
len(solution.moves)
```

```{python}

```

local

```{python}
o = hill_climbing_ptsp(m, 60, config, 'local')
```

```{python}
solution = local_solution(m, config, o)
```

```{python}
len(solution.moves)
```

```{python}

```

```{python}
gs = GeneticOrderSolver(32,m,config)
```

```{python}
o = gs.solve('local',120)
```

```{python}
solution = local_solution(m, config, o)
```

```{python}
len(solution.moves)
```

```{python}

```

```{python}
gs = GeneticOrderSolver(32,m,config)
```

```{python}
o = gs.solve('angle',120)
```

```{python}
solution = local_solution(m, config, o)
```

```{python}
len(solution.moves)
```

```{python}

```

```{python}
gs = GeneticOrderSolver(32,m,config)
```

```{python}
o = gs.solve('dist',120)
```

```{python}
solution = local_solution(m, config, o)
```

```{python}
len(solution.moves)
```

```{python}

```

```{python}

```

```{python}

```
